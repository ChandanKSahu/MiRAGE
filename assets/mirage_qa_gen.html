<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multihop QA Visualization</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Space Grotesk', sans-serif;
            background: linear-gradient(135deg, #0d1117 0%, #161b22 50%, #0d1117 100%);
            min-height: 100vh;
            color: #e6edf3;
            padding: 2rem;
        }
        .container { max-width: 1600px; margin: 0 auto; }
        h1 {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, #58a6ff, #a371f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { text-align: center; color: #8b949e; margin-bottom: 2rem; }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .stat {
            background: #21262d;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #30363d;
        }
        .stat-value { font-size: 1.8rem; font-weight: 700; color: #58a6ff; }
        .stat-label { color: #8b949e; font-size: 0.85rem; }
        
        .section {
            background: #161b22;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #30363d;
        }
        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #58a6ff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .initial-chunk {
            background: #0d1117;
            border: 2px solid #58a6ff;
            border-radius: 10px;
            padding: 1.25rem;
        }
        .initial-label {
            background: #58a6ff;
            color: #0d1117;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            display: inline-block;
        }
        .chunk-content {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #c9d1d9;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .depth-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px dashed #30363d;
        }
        .depth-section:last-child { border-bottom: none; }
        .depth-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .depth-badge {
            background: #a371f7;
            color: #0d1117;
            padding: 6px 14px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.9rem;
        }
        .depth-status {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .status-complete { background: rgba(63,185,80,0.2); color: #3fb950; }
        .status-incomplete { background: rgba(210,153,34,0.2); color: #d29922; }
        .depth-explanation {
            color: #8b949e;
            font-size: 0.85rem;
            margin-bottom: 1rem;
            font-style: italic;
        }
        
        .queries-grid {
            display: grid;
            gap: 1rem;
        }
        .query-column {
            background: #0d1117;
            border-radius: 8px;
            overflow: hidden;
        }
        .query-header {
            padding: 0.75rem 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #0d1117;
            font-weight: 600;
        }
        .query-chunks {
            padding: 0.75rem;
        }
        .retrieved-chunk {
            background: #21262d;
            border-radius: 6px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-left: 3px solid;
        }
        .retrieved-chunk:last-child { margin-bottom: 0; }
        .chunk-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .chunk-id {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            background: rgba(255,255,255,0.1);
            padding: 2px 8px;
            border-radius: 4px;
        }
        .chunk-verdict {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
        }
        .verdict-related { background: rgba(63,185,80,0.2); color: #3fb950; }
        .verdict-explanatory { background: rgba(88,166,255,0.2); color: #58a6ff; }
        .no-chunks {
            color: #8b949e;
            font-size: 0.85rem;
            text-align: center;
            padding: 1rem;
        }
        
        .context-box {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 1rem;
        }
        .context-chunks-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .context-chunk-tag {
            background: #21262d;
            padding: 6px 12px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            border: 1px solid #30363d;
        }
        
        .keyword-chain {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: #0d1117;
            border-radius: 8px;
        }
        .chain-kw {
            padding: 8px 14px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.85rem;
        }
        .chain-arrow { color: #58a6ff; font-size: 1.3rem; }
        .chain-relation { color: #8b949e; font-size: 0.8rem; margin: 0 0.5rem; }
        
        .qa-box {
            background: linear-gradient(135deg, rgba(88,166,255,0.1), rgba(163,113,247,0.1));
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid rgba(88,166,255,0.3);
        }
        .qa-label { font-weight: 600; margin-bottom: 0.5rem; }
        .question-label { color: #58a6ff; }
        .answer-label { color: #3fb950; }
        .question-text, .answer-text {
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 1rem;
        }
        .answer-text {
            background: rgba(0,0,0,0.3);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0;
        }
        
        .kw { font-weight: 600; }
        .flow-arrow {
            text-align: center;
            color: #58a6ff;
            font-size: 2rem;
            padding: 0.5rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Multihop QA Visualization</h1>
        <p class="subtitle">Initial Chunk -> Retrieval Iterations -> Context -> Keyword Chain -> QA</p>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-value">5</div>
                <div class="stat-label">Total Chunks</div>
            </div>
            <div class="stat">
                <div class="stat-value">4</div>
                <div class="stat-label">Hops</div>
            </div>
            <div class="stat">
                <div class="stat-value">2</div>
                <div class="stat-label">Depth</div>
            </div>
            <div class="stat">
                <div class="stat-value">9</div>
                <div class="stat-label">Keywords</div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Initial Chunk</div>
            <div class="initial-chunk">
                <span class="initial-label">SEED CHUNK - ECE_TRANS_180a21e:5</span>
                <div class="chunk-content">## I. Statement of technical rationale and justification<br><br>## A. Introduction<br><br>1. Passenger vehicles are commonly assigned a <span class="kw" style="background:#58a6ff;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">vehicle power rating</span>, which is useful for comparing the performance of different vehicles. <span class="kw" style="background:#58a6ff;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">Vehicle power rating</span> has also been used for  other  purposes  such  as  vehicle  classification,  customer  information,  insurance,  and taxation.<br>2. Historically, almost every passenger vehicle produced for the consumer market has been powered exclusively by an <span class="kw" style="background:#58a6ff;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">internal combustion engine (ICE)</span>. The <span class="kw" style="background:#58a6ff;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">vehicle power rating</span> assigned to these conventional vehicles has customarily been t</div>
            </div>
        </div>
        
        <div class="flow-arrow">v</div>

        <div class="section">
            <div class="section-title">Retrieval Iterations</div>

            <div class="depth-section">
                <div class="depth-header">
                    <span class="depth-badge">DEPTH 1</span>
                    <span class="depth-status status-incomplete">INCOMPLETE</span>
                </div>
                <p class="depth-explanation">The text mentions WLTP without defining it, which is necessary for complete understanding.</p>
                <div class="queries-grid" style="grid-template-columns: repeat(2, 1fr);">

                    <div class="query-column">
                        <div class="query-header" style="background:#42a5f5;">Query 1: WLTP definition</div>
                        <div class="query-chunks">

                            <div class="retrieved-chunk" style="border-color:#42a5f5;">
                                <div class="chunk-header">
                                    <span class="chunk-id">ECE_TRANS_180a21e:76</span>
                                    <span class="chunk-verdict verdict-explanatory">EXPLANATORY</span>
                                </div>
                                <div style="font-size:0.8rem;color:#8b949e;">The candidate chunk, an image, likely contains a definition or explanation of WLTP, directly address...</div>
                            </div>

                            <div class="retrieved-chunk" style="border-color:#42a5f5;">
                                <div class="chunk-header">
                                    <span class="chunk-id">ECE_TRANS_180a22e:45</span>
                                    <span class="chunk-verdict verdict-related">RELATED</span>
                                </div>
                                <div style="font-size:0.8rem;color:#8b949e;">The candidate chunk discusses the calculation of certified range for PEVs under WLTP, which is relat...</div>
                            </div>

                        </div>
                    </div>

                    <div class="query-column">
                        <div class="query-header" style="background:#ff9800;">Query 2: WLTP regulation vehicle power rating</div>
                        <div class="query-chunks">

                            <div class="retrieved-chunk" style="border-color:#ff9800;">
                                <div class="chunk-header">
                                    <span class="chunk-id">ECE_TRANS_180a21e:73</span>
                                    <span class="chunk-verdict verdict-related">RELATED</span>
                                </div>
                                <div style="font-size:0.8rem;color:#8b949e;">The candidate chunk discusses the validation and calculation of vehicle system power rating, which i...</div>
                            </div>

                            <div class="retrieved-chunk" style="border-color:#ff9800;">
                                <div class="chunk-header">
                                    <span class="chunk-id">ECE_TRANS_180a21e:68</span>
                                    <span class="chunk-verdict verdict-related">RELATED</span>
                                </div>
                                <div style="font-size:0.8rem;color:#8b949e;">The candidate chunk mentions the calculation of vehicle system power rating within the context of WL...</div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>

            <div class="depth-section">
                <div class="depth-header">
                    <span class="depth-badge">DEPTH 2</span>
                    <span class="depth-status status-complete">COMPLETE</span>
                </div>
                <p class="depth-explanation">The chunk describes the actions to be taken at the end of vehicle running, including recording operational metrics and stopping the vehicle and measurement devices, and refers to the next section on calculation of vehicle system power rating.</p>
                <div class="queries-grid" style="grid-template-columns: repeat(4, 1fr);">

                    <div class="query-column">
                        <div class="query-header" style="background:#42a5f5;">Query 1: TP1" vehicle system power rating</div>
                        <div class="query-chunks">
<div class="no-chunks">No chunks retrieved</div>
                        </div>
                    </div>

                    <div class="query-column">
                        <div class="query-header" style="background:#ff9800;">Query 2: TP2" vehicle system power rating</div>
                        <div class="query-chunks">
<div class="no-chunks">No chunks retrieved</div>
                        </div>
                    </div>

                    <div class="query-column">
                        <div class="query-header" style="background:#66bb6a;">Query 3: 6.9.3.3" power correction</div>
                        <div class="query-chunks">
<div class="no-chunks">No chunks retrieved</div>
                        </div>
                    </div>

                    <div class="query-column">
                        <div class="query-header" style="background:#ec407a;">Query 4: dynamometer rollers efficiency calculation</div>
                        <div class="query-chunks">
<div class="no-chunks">No chunks retrieved</div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
        
        <div class="flow-arrow">v</div>

        <div class="section">
            <div class="section-title">Final Context (All Chunks)</div>
            <div class="context-box">
                <div class="context-chunks-list">
<span class="context-chunk-tag">ECE_TRANS_180a21e:5 (INITIAL)</span>
<span class="context-chunk-tag">ECE_TRANS_180a21e:76 (EXPLANATORY)</span>
<span class="context-chunk-tag">ECE_TRANS_180a22e:45 (RELATED)</span>
<span class="context-chunk-tag">ECE_TRANS_180a21e:73 (RELATED)</span>
<span class="context-chunk-tag">ECE_TRANS_180a21e:68 (RELATED)</span>

                </div>
            </div>
        </div>
        
        <div class="flow-arrow">v</div>

        <div class="section">
            <div class="section-title">Keyword Chain (Cross-Chunk Connections)</div>
            <div class="keyword-chain">

                <span class="chain-kw" style="background:#42a5f533;color:#42a5f5;">vehicle power rating</span>
                <span class="chain-arrow">-&gt;</span>
                <span class="chain-kw" style="background:#42a5f533;color:#42a5f5;">vehicle system power rating</span>
                <span class="chain-relation">(definition and application to different vehicle types)</span>

            </div>
        </div>
        
        <div class="flow-arrow">v</div>

        <div class="section">
            <div class="section-title">Generated Question & Answer</div>
            <div class="qa-box">
                <div class="qa-label question-label">Question:</div>
                <div class="question-text">For electrified vehicles with both an <span class="kw" style="background:#58a6ff;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">internal combustion engine (ICE)</span> and <span class="kw" style="background:#58a6ff;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">electric machine(s)</span>, how should the <span class="kw" style="background:#58a6ff;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">vehicle system power rating</span> be adjusted if the vehicle control system electrically compensates for variations in <span class="kw" style="background:#58a6ff;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">ICE power output</span> due to altitude or air temperature?</div>
                <div class="qa-label answer-label">Answer:</div>
                <div class="answer-text">If the vehicle control system adjusts the power output of <span class="kw" style="background:#3fb950;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">electric machine(s)</span> to electrically compensate for variation in <span class="kw" style="background:#3fb950;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">ICE power output</span> due to altitude or air temperature, the amount of <span class="kw" style="background:#3fb950;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">electrical compensation</span> shall be subtracted from the <span class="kw" style="background:#3fb950;color:#000;padding:2px 6px;border-radius:4px;font-weight:600;">vehicle system power rating</span> after the power correction is performed.</div>
            </div>
        </div>
        
        <div style="text-align:center;color:#8b949e;padding:2rem 0;font-size:0.85rem;">
            Generated by MiRAGe QA Pipeline | Keywords highlighted show concept linkage across chunks
        </div>
    </div>
</body>
</html>
